<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Kajaki z Wujem â€“ Wujoza Totalna 2025</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Bebas+Neue&display=swap" rel="stylesheet">
  <style>
    /* ... (bez zmian, caÅ‚y styl zostaje taki jak byÅ‚ â€“ pominiÄ™to tu dla przejrzystoÅ›ci) */
  </style>
</head>
<body>

  <video autoplay muted loop class="bg-video">
    <source src="kajaki.mp4" type="video/mp4">
  </video>

  <div class="page-wrapper">
    <div class="headline-box">
      <div class="headline">
        <div class="main-title">KAJAKI Z WUJEM</div>
        <div class="sub-title">WUJOZA TOTALNA 2025</div>
      </div>
    </div>

    <div class="content-box">
      <h2 class="song-quote">ğŸµ Atmosfera JEST gorÄ…ca! PraÅ¼yÅ‚y nas promienie SÅOÅƒCA! ğŸµ</h2>
      <p>
        Nie pozwÃ³l, aby emocje opadÅ‚y â€“ <span class="highlight">podziel siÄ™ swoimi zdjÄ™ciami i filmami z Wujozy</span>
      </p>
      <p class="after-text">Tworzymy aftermovie â€“ kaÅ¼de zdjÄ™cie i film siÄ™ liczy!</p>

      <!-- Nowy formularz JS -->
      <form id="uploadForm" class="upload-form">
        <input type="file" id="fileInput" required />
        <button type="submit">WyÅ›lij film/zdjÄ™cie</button>
        <p id="uploadMessage">âœ… WysÅ‚ano! MoÅ¼esz dodaÄ‡ kolejny plik.</p>
        <progress id="progressBar" value="0" max="100" style="display: none; width: 100%; margin-top: 10px;"></progress>
      </form>
    </div>
  </div>

  <audio id="muzyka" autoplay loop>
    <source src="muzyka.mp3" type="audio/mpeg">
  </audio>

  <script>
    const form = document.getElementById("uploadForm");
    const input = document.getElementById("fileInput");
    const message = document.getElementById("uploadMessage");
    const progress = document.getElementById("progressBar");

    form.addEventListener("submit", function(e) {
      e.preventDefault();
      const file = input.files[0];
      if (!file) return;

      const reader = new FileReader();
      reader.readAsDataURL(file);

      reader.onload = function () {
        const base64 = reader.result.split(',')[1];
        const formData = new FormData();
        formData.append("file", base64);
        formData.append("filename", file.name);
        formData.append("mimeType", file.type);

        const xhr = new XMLHttpRequest();
        xhr.open("POST", "https://script.google.com/macros/s/AKfycbz59nP9PJbdfgbqeP9ctldrm6KEgCEEPiPlRAMRKMgl17kzLVHS5IFDlS6TGP0duIS0ww/exec");

        progress.style.display = "block";
        progress.value = 0;

        xhr.upload.onprogress = function(event) {
          if (event.lengthComputable) {
            const percent = (event.loaded / event.total) * 100;
            progress.value = percent;
          }
        };

        xhr.onload = function() {
          if (xhr.status === 200 && xhr.responseText === "OK") {
            message.style.display = "block";
            message.style.color = "green";
            message.textContent = "âœ… WysÅ‚ano! MoÅ¼esz dodaÄ‡ kolejny plik.";
            input.value = "";
            progress.value = 0;
          } else {
            message.style.display = "block";
            message.style.color = "red";
            message.textContent = "âŒ BÅ‚Ä…d przy wysyÅ‚aniu.";
          }
        };

        xhr.onerror = function () {
          message.style.display = "block";
          message.style.color = "red";
          message.textContent = "âŒ Nie udaÅ‚o siÄ™ poÅ‚Ä…czyÄ‡ z serwerem.";
        };

        xhr.send(formData);
      };
    });
  </script>

</body>
</html>
